<div class="rp-single-form-page">
  <h2>Recupera Password</h2>
  <p class="rp-subtitle">Una password con un link di recupero sar√† inviato alla tua email. Compila il form.</p>

  <form [formGroup]="form" (ngSubmit)="onSubmit()">

    <div class="mb-4">
      <p-floatlabel variant="on">
        <input id="email" type="email" pInputText formControlName="email" class="w-full"/>
        <label for="email" class="block mb-1">Email</label>
      </p-floatlabel>


      <div class="rp-form-input-error" *ngIf="form.get('email')?.touched && form.get('email')?.errors">
        <span *ngIf="form.get('email')?.errors?.['required']">Campo obbligatorio</span>
        <span *ngIf="form.get('email')?.errors?.['email']">Email non valida</span>
      </div>
    </div>

    <div class="mb-2 flex items-center">
      <button [disabled]="loading || form.invalid" type="submit" pButton label="Invia" class="w-full"></button>
    </div>
    <div class="mb-2 mt-2" *ngIf="loading">
      <p-progress-bar mode="indeterminate" [style]="{ height: '6px' }"/>
    </div>
    <div class="mb-2 mt-2" *ngIf="error">
      <p-message size="small" icon="pi pi-exclamation-circle" severity="error">{{ error }}</p-message>
    </div>
    <div class="mb-2 mt-2" *ngIf="successMessage">
      <p-message size="small" icon="pi pi-exclamation-circle" severity="success">{{ successMessage }}</p-message>
    </div>
  </form>

  <div class="mt-3 text-center">
    @if (loading) {
      <span class="text-sm" style="color: #a3a3a3">Torna al login</span>
    } @else {
      <a [routerLink]="['/login']" tabindex="-1" class="text-sm text-blue-600 hover:underline">Torna al login</a>
    }
  </div>
</div>
