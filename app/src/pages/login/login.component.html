<div class="rp-single-form-page">
  <div style="text-align: center">
    <img src="logo-morelli.bn.svg" alt="logo" style="width: 100%; max-width: 200px;">
    <p class="rp-note">Piattaforma prenotazione gioco libero.</p>
  </div>
  <div>
    <h2>Login</h2>
    <form [formGroup]="form" (ngSubmit)="onSubmit()">

      <div class="mb-5">
        <p-floatlabel variant="on">
          <input id="username" type="text" pInputText formControlName="username" class="w-full"/>
          <label for="username">Username</label>
        </p-floatlabel>

        <div class="rp-form-input-error" *ngIf="form.get('username')?.touched && form.get('username')?.errors">
          <span *ngIf="form.get('username')?.errors?.['required']">Campo obbligatorio</span>
        </div>
      </div>

      <div class="mb-5">
        <p-floatlabel variant="on">
          <p-password
            id="password"
            formControlName="password"
            [feedback]="false"
            [toggleMask]="true"
            styleClass="w-full"
            [inputStyle]="{'width':'100%'}"
          >
          </p-password>
          <label for="password">Password</label>
        </p-floatlabel>
        <div class="rp-form-input-error" *ngIf="form.get('password')?.touched && form.get('password')?.errors">
          <span *ngIf="form.get('password')?.errors?.['required']">Campo obbligatorio</span>
        </div>
      </div>

      <div class="mb-3 flex items-center">
        <input id="remember" type="checkbox" formControlName="remember"/>
        <label for="remember" class="ml-2">Ricordami</label>
      </div>
      <div class="mb-4 flex items-center">
        <button [disabled]="loading || form.invalid" type="submit" pButton label="Accedi" class="w-full"></button>
      </div>
      <div class="mb-2 mt-2" *ngIf="loading">
        <p-progress-bar mode="indeterminate" [style]="{ height: '6px' }"/>
      </div>
      <div class="mb-2 mt-2" *ngIf="error">
        <p-message size="small" icon="pi pi-exclamation-circle" severity="error">{{ error }}</p-message>
      </div>


    </form>
    <div class="mt-3 text-center">
      @if (loading) {
        <span class="text-sm" style="color: #a3a3a3">
          Password dimenticata?
        </span>
      } @else {
        <a [routerLink]="['/password-recovery']" tabindex="-1" class="text-sm text-blue-600 hover:underline">
          Password dimenticata?
        </a>
      }
    </div>
  </div>

</div>
